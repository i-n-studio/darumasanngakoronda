# 制作状況

このファイルは「だるまさんがころんだ」プロジェクトの開発進行状況を記録するためのドキュメントです。

## 一、概要
- プロジェクト名: だるまさんがころんだ
- 目的: 傾きセンサーを使ったバランスチャレンジゲーム（Monaca + Cordova）
- 最終更新日: 2025-11-18

## 二、完了した作業
- Monaca/Cordova向け最小プロジェクト作成
  - `index.html`, `css/style.css`, `js/game.js`, `config.xml` を作成
- センサー実装
  - DeviceMotion / DeviceOrientation のハンドリング
  - iOS 13+ の permission リクエスト処理実装（pointerdownで要求）
  - キーボードでのフォールバック（←/→/z/x）を実装
- ゲームロジック
  - safe / preturn / danger / balance / finish の状態機構の実装
  - 「進む」ボタンで長押し移動処理
  - 予兆（preturn）時にプレイヤーが震える描画を実装
  - danger 時に停止でバランスチャレンジ開始、move中にミス
- バランスチャレンジ（Balance mini-game）
  - センサーUI（safeArea + sensorDot）で指定の位置にdotを維持する実装
  - Easy / Normal / Hard / Hell（隠し）の難度設定
  - 成功でバフ（移動速度アップ）、失敗でデバフ（移動速度ダウン） + ライフ減少
- 不正対策
  - safe area がゆっくり移動することで机へ置いた不正操作を防止
  - 移動中の判定強化（danger中にBell）
- デバッグとUI
  - デバッグパネル（roll/pitch表示、モード/duration/safeWidthの調整）実装
- WebAudio
  - 簡易BGM（Oscillatorによる実装）と成功/失敗 のSFX実装

## 三、進行中/未完了の作業
- BGM、効果音をオーディオファイルとして追加（現状はOscillatorの簡易実装）
- ピクセルアート、スプライトアニメーションを追加
- マルチ解像度対応・UI最適化（PC/スマホ/タブレット）
- レベルデザインとバランス設定のテレメトリ取得
- 隠しモード「Hell」のメニュー表示のUI変更（現在はシェイクでアンロック）
- リーダーボードやセーブ機能の追加（オンラインサービス連携）

## 四、スクリーンショット・図の追加

- 画面レイアウト図・スクショは `docs/screenshots/` に保存してください。画像ファイル名は `YYYY-MM-DD_description.png` の形式を推奨。
- `docs/画面レイアウト図.md` にレイアウト図の説明を載せました。Figmaなどを使う場合は該当URLをここに追記してください。

## 五、スプリント記録とコミット管理

- スプリントごとに、`docs/スプリント記録テンプレート.md` をコピーして `docs/sprints/YYYY-MM-DD_<short-name>.md` を作成して内容を埋めてください。
- もしくは `docs/開発状況.md` 最下部に要約を追加して、コミットメッセージは `docs: update dev status for sprint-<X>` のようにしてください。

## 六、実機テスト記録（テンプレート）

- 日時: yyyy-mm-dd
- デバイス: (例) iPhone 12 (iOS 16.4), Pixel 6 (Android 13)
- 設定: モード=Normal, difficulty=Hard 等
- テスト内容: (例) Preturn=2s -> Danger発生。進むをやめてBalanceで成功/失敗確認
- 結果（iOS）: Pass/Fail 詳細
- 結果（Android）: Pass/Fail 詳細
- 修正/チューニング: (例) HardでsafeSize 40→50に調整)

実機での結果は上記テンプレに従い `docs/sprints` に記録するか、`docs/開発状況.md` の末尾に追記してください。

## 七、今後のスプリント案（提案）
### （１）スプリント1（2週間）
- リッチなBGM・SFXを実装
- ピクセルアート の追加（プレイヤー・鬼）
- 移動時の足音・効果音

### （２）スプリント2（2週間）
- チュートリアル実装（バランスチャレンジの説明）
- カスタムモード画面の実装
- 高度な不正検出（振動と角速度の組合せ）

### （３）スプリント3（3週間）
- スコア保存（ローカル/オンライン）
- リーダーボード実装（Firebase/PlayFab）
- キャラクター選択画面

## 八、テスト計画
- ブラウザ (Mac, Windows) での動作確認 (キーボードでのフォールバック)
- Monaca Preview, Monaca Debugger での実機動作確認（iOS/Android）
  - iOS: DeviceMotion permission の挙動を確認
  - Android: センサー安定性とレスポンスを確認
- UI/レスポンシブチェック: 画面サイズに応じてcanvasサイズやコントロール配置を確認

## 九、主なファイル一覧
- `index.html` - ゲーム UI
- `css/style.css` - レイアウト
- `js/game.js` - 主ロジック
- `config.xml` - Cordova / Monaca 設定
- `README.md` - 実行方法と簡易ドキュメント

## 十、注記
- 実機テストやパフォーマンス計測、バランスパラメータのログ計測は早めに行ってください。実機で感覚が大きく変わるため、パラメータはチューニング前提の値になっています。

---
記録者: 井上真翔（浜松未来総合専門学校）
次回更新予定: スプリントごとに成果物をまとめて更新してください。
